<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIG DADDY V3 - Deployment Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff0033;
            --primary-dark: #cc0029;
            --primary-light: #ff3355;
            --secondary: #000000;
            --dark: #121212;
            --darker: #0a0a0a;
            --light: #ffffff;
            --medium-gray: #888888;
            --success: #00ff66;
            --warning: #ffaa00;
            --danger: #ff0033;
            --info: #0099ff;
            --border-radius: 12px;
            --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #121212 100%);
            color: var(--light);
            line-height: 1.6;
            min-height: 100vh;
        }

        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(255, 0, 51, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
        }

        .logo-container {
            padding: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(135deg, rgba(255, 0, 51, 0.1), transparent);
        }

        .logo-container h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--light);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
        }

        .logo-container .version {
            font-size: 0.7rem;
            background-color: var(--primary);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
            font-weight: 600;
        }

        .nav-menu {
            flex: 1;
            padding: 20px 0;
            list-style: none;
            overflow-y: auto;
        }

        .nav-menu li a {
            display: flex;
            align-items: center;
            padding: 12px 25px;
            color: var(--medium-gray);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 500;
            margin: 5px 15px;
            border-radius: 6px;
        }

        .nav-menu li a:hover {
            color: var(--primary-light);
            background-color: rgba(255, 0, 51, 0.1);
            transform: translateX(5px);
        }

        .nav-menu li a i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
            font-size: 1rem;
        }

        .nav-menu li.active a {
            color: var(--primary);
            font-weight: 600;
            background-color: rgba(255, 0, 51, 0.2);
            border-left: 3px solid var(--primary);
            box-shadow: 0 5px 15px rgba(255, 0, 51, 0.1);
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            padding: 30px;
            background-color: var(--secondary);
            overflow-y: auto;
            position: relative;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--box-shadow);
        }

        .content-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--light);
            background: linear-gradient(to right, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(255, 0, 51, 0.3);
        }

        .btn {
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .btn i {
            margin-right: 8px;
            font-size: 0.9rem;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            box-shadow: var(--box-shadow);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 51, 0.4);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #00cc55;
            transform: translateY(-2px);
        }

        .btn-info {
            background: var(--info);
            color: white;
        }

        .btn-info:hover {
            background: #0088cc;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: var(--warning);
            color: black;
        }

        .btn-warning:hover {
            background: #e69500;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #cc0029;
            transform: translateY(-2px);
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.03);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .stat-item:hover {
            background-color: rgba(255, 255, 255, 0.07);
            transform: translateY(-3px);
        }

        .stat-item i {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--light);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--medium-gray);
            text-align: center;
        }

        /* Deployment Cards */
        .deployment-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--border-radius);
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 15px;
            transition: var(--transition);
        }

        .deployment-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 51, 0.1);
        }

        .deployment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .deployment-name {
            font-size: 1.2rem;
            color: var(--light);
        }

        .deployment-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-success {
            background: rgba(0, 255, 102, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-building {
            background: rgba(255, 170, 0, 0.2);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .status-failed {
            background: rgba(255, 0, 51, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .status-pending {
            background: rgba(0, 153, 255, 0.2);
            color: var(--info);
            border: 1px solid var(--info);
        }

        .deployment-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .deployment-detail {
            display: flex;
            flex-direction: column;
        }

        .deployment-label {
            color: var(--medium-gray);
            font-size: 0.8rem;
        }

        .deployment-value {
            color: var(--light);
            font-weight: 500;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--dark);
            border-radius: var(--border-radius);
            padding: 30px;
            width: 95%;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--box-shadow);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--medium-gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--primary);
        }

        /* Tab Styles */
        .tabs {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 20px;
            background: none;
            border: none;
            color: var(--medium-gray);
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 2px solid transparent;
            font-weight: 500;
            white-space: nowrap;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: rgba(255, 0, 51, 0.1);
        }

        .tab:hover:not(.active) {
            color: var(--light);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Logs Container */
        .logs-container {
            background: #0a0a0a;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
            color: var(--light);
            line-height: 1.4;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .log-line {
            margin-bottom: 2px;
            padding: 2px 0;
            font-family: 'Courier New', monospace;
        }

        .log-line.info {
            color: #00ff66;
        }

        .log-line.warning {
            color: #ffaa00;
        }

        .log-line.error {
            color: #ff0033;
            background: rgba(255, 0, 51, 0.1);
            padding: 2px 5px;
            border-radius: 3px;
        }

        .log-line.debug {
            color: #0099ff;
        }

        .log-line.build {
            color: #ff66ff;
        }

        .log-line.deploy {
            color: #66ff66;
        }

        /* Real-time Logs */
        .real-time-logs {
            background: #0a0a0a;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 400px;
            overflow-y: auto;
            color: var(--light);
            line-height: 1.4;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .log-entry {
            margin-bottom: 4px;
            padding: 2px 0;
        }

        .log-timestamp {
            color: var(--medium-gray);
            margin-right: 10px;
            font-size: 0.75rem;
        }

        .log-message {
            color: var(--light);
        }

        .log-message.error {
            color: var(--danger);
            background: rgba(255, 0, 51, 0.1);
            padding: 2px 5px;
            border-radius: 3px;
        }

        .log-message.success {
            color: var(--success);
        }

        .log-message.warning {
            color: var(--warning);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--light);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: var(--light);
            font-family: inherit;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(255, 0, 51, 0.2);
        }

        .form-text {
            font-size: 0.8rem;
            color: var(--medium-gray);
            margin-top: 5px;
        }

        /* Auto-deploy Settings */
        .auto-deploy-settings {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-label {
            color: var(--light);
            font-weight: 500;
        }

        .setting-description {
            color: var(--medium-gray);
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Deployment Progress */
        .deployment-progress {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            color: var(--medium-gray);
            font-size: 0.8rem;
        }

        /* Error Summary */
        .error-summary {
            background: rgba(255, 0, 51, 0.1);
            border: 1px solid var(--danger);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .error-count {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--danger);
            margin-bottom: 10px;
        }

        .error-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .error-item {
            padding: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.8rem;
        }

        .error-item:last-child {
            border-bottom: none;
        }

        /* Scrollbar styling */
        .logs-container::-webkit-scrollbar,
        .real-time-logs::-webkit-scrollbar,
        .error-list::-webkit-scrollbar {
            width: 8px;
        }

        .logs-container::-webkit-scrollbar-track,
        .real-time-logs::-webkit-scrollbar-track,
        .error-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .logs-container::-webkit-scrollbar-thumb,
        .real-time-logs::-webkit-scrollbar-thumb,
        .error-list::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        /* View Management */
        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        /* Loading States */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--medium-gray);
            font-style: italic;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .content-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1;
                min-width: 120px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="bg-overlay"></div>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo-container">
                <h1>BIG DADDY <span class="version">DEPLOY</span></h1>
            </div>
            
            <ul class="nav-menu">
                <li class="active"><a href="#" onclick="showView('deployments')"><i class="fas fa-rocket"></i> Deployments</a></li>
                <li><a href="#" onclick="showView('github')"><i class="fab fa-github"></i> GitHub Integration</a></li>
                <li><a href="#" onclick="showView('autoDeploy')"><i class="fas fa-robot"></i> Auto Deploy</a></li>
                <li><a href="#" onclick="showView('logs')"><i class="fas fa-file-alt"></i> Deployment Logs</a></li>
                <li><a href="#" onclick="showView('errors')"><i class="fas fa-exclamation-triangle"></i> Error Tracking</a></li>
                <li><a href="#" onclick="showView('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Deployments View -->
            <div id="deploymentsView" class="view active">
                <header class="content-header">
                    <h2>Deployment Management</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="showCreateAppModal()">
                            <i class="fas fa-plus"></i> Create New App
                        </button>
                        <button class="btn btn-success" onclick="showBulkDeployModal()">
                            <i class="fas fa-layer-group"></i> Bulk Deploy
                        </button>
                        <button class="btn btn-info" onclick="loadDeployments()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </header>

                <div class="card">
                    <h3 class="section-title">Active Deployments</h3>
                    <div id="deploymentsList">
                        <!-- Deployments will be loaded dynamically -->
                    </div>
                </div>

                <div class="dashboard-grid" style="margin-top: 25px;">
                    <div class="card">
                        <h3 class="section-title">Quick Deploy</h3>
                        <form id="quickDeployForm">
                            <div class="form-group">
                                <label class="form-label" for="quickRepo">GitHub Repository</label>
                                <input type="text" id="quickRepo" class="form-control" 
                                       placeholder="https://github.com/username/repo" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="quickBranch">Branch</label>
                                <input type="text" id="quickBranch" class="form-control" value="main" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="quickAppName">App Name</label>
                                <input type="text" id="quickAppName" class="form-control" 
                                       placeholder="my-app" required>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-bolt"></i> Quick Deploy
                            </button>
                        </form>
                    </div>

                    <div class="card">
                        <h3 class="section-title">Deployment Status</h3>
                        <div class="stats-grid" id="deploymentStats">
                            <!-- Stats will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- GitHub Integration View -->
            <div id="githubView" class="view">
                <header class="content-header">
                    <h2>GitHub Integration</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="connectGitHub()">
                            <i class="fab fa-github"></i> Connect GitHub
                        </button>
                        <button class="btn btn-info" onclick="loadRepositories()">
                            <i class="fas fa-sync-alt"></i> Refresh Repos
                        </button>
                    </div>
                </header>

                <div class="dashboard-grid">
                    <div class="card">
                        <h3 class="section-title">Connected Repositories</h3>
                        <div id="repositoriesList">
                            <!-- Repositories will be loaded dynamically -->
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="section-title">GitHub Webhooks</h3>
                        <div class="auto-deploy-settings">
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Auto Deploy on Push</div>
                                    <div class="setting-description">Automatically deploy when code is pushed to the main branch</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="autoDeployPush" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Auto Deploy on PR Merge</div>
                                    <div class="setting-description">Automatically deploy when pull requests are merged</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="autoDeployPR" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Auto Deploy View -->
            <div id="autoDeployView" class="view">
                <header class="content-header">
                    <h2>Auto Deploy Configuration</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="saveAutoDeploySettings()">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </div>
                </header>

                <div class="dashboard-grid">
                    <div class="card">
                        <h3 class="section-title">Auto Deploy Rules</h3>
                        <div class="auto-deploy-settings">
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Enable Auto Deploy</div>
                                    <div class="setting-description">Master switch for all auto deployment features</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="enableAutoDeploy" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Deploy on Tag</div>
                                    <div class="setting-description">Automatically deploy when new tags are created</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="deployOnTag">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Rollback on Failure</div>
                                    <div class="setting-description">Automatically rollback to previous version if deployment fails</div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="rollbackOnFailure" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="section-title">Deployment Triggers</h3>
                        <div id="deploymentTriggers">
                            <!-- Triggers will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs View -->
            <div id="logsView" class="view">
                <header class="content-header">
                    <h2>Deployment Logs</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="startLiveLogs()">
                            <i class="fas fa-play"></i> Start Live Logs
                        </button>
                        <button class="btn btn-warning" onclick="stopLiveLogs()">
                            <i class="fas fa-stop"></i> Stop Live
                        </button>
                        <button class="btn btn-info" onclick="clearLogs()">
                            <i class="fas fa-trash"></i> Clear Logs
                        </button>
                    </div>
                </header>

                <div class="dashboard-grid">
                    <div class="card">
                        <h3 class="section-title">Real-time Deployment Logs</h3>
                        <div class="real-time-logs" id="liveLogs">
                            <!-- Live logs will appear here -->
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="section-title">Recent Deployments</h3>
                        <div id="recentDeployments">
                            <!-- Recent deployments will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error Tracking View -->
            <div id="errorsView" class="view">
                <header class="content-header">
                    <h2>Error Tracking</h2>
                    <div class="header-actions">
                        <button class="btn btn-danger" onclick="clearAllErrors()">
                            <i class="fas fa-trash"></i> Clear All Errors
                        </button>
                        <button class="btn btn-info" onclick="loadErrors()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </header>

                <div class="dashboard-grid">
                    <div class="card">
                        <h3 class="section-title">Error Summary</h3>
                        <div class="error-summary">
                            <div class="error-count" id="errorCount">0 Errors</div>
                            <div id="errorSummary">
                                <!-- Error summary will be loaded dynamically -->
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="section-title">Recent Errors</h3>
                        <div class="error-list" id="errorList">
                            <!-- Error list will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard View -->
            <div id="dashboardView" class="view">
                <header class="content-header">
                    <h2>Deployment Dashboard</h2>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </header>

                <div class="dashboard-grid">
                    <div class="card">
                        <h3 class="section-title">Deployment Analytics</h3>
                        <div class="stats-grid" id="dashboardStats">
                            <!-- Dashboard stats will be loaded dynamically -->
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="section-title">Quick Actions</h3>
                        <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">
                            <button class="btn btn-success" onclick="showView('deployments')">
                                <i class="fas fa-rocket"></i> Manage Deployments
                            </button>
                            <button class="btn btn-info" onclick="showView('github')">
                                <i class="fab fa-github"></i> GitHub Settings
                            </button>
                            <button class="btn btn-warning" onclick="showView('logs')">
                                <i class="fas fa-file-alt"></i> View Logs
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="createAppModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Create New App</h3>
                <button class="modal-close" onclick="closeModal('createAppModal')">&times;</button>
            </div>
            <form id="createAppForm">
                <div class="form-group">
                    <label class="form-label" for="appName">App Name</label>
                    <input type="text" id="appName" class="form-control" required placeholder="my-app-name">
                </div>
                <div class="form-group">
                    <label class="form-label" for="appRegion">Region</label>
                    <select id="appRegion" class="form-control" required>
                        <option value="us">United States (us)</option>
                        <option value="eu">Europe (eu)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="appStack">Stack</label>
                    <select id="appStack" class="form-control" required>
                        <option value="heroku-20">Heroku-20</option>
                        <option value="heroku-22">Heroku-22</option>
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Create App
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="bulkDeployModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Bulk Deploy Apps</h3>
                <button class="modal-close" onclick="closeModal('bulkDeployModal')">&times;</button>
            </div>
            <form id="bulkDeployForm">
                <div class="form-group">
                    <label class="form-label" for="githubRepoBulk">GitHub Repository URL</label>
                    <input type="text" id="githubRepoBulk" class="form-control" required 
                           placeholder="https://github.com/username/repository">
                    <div class="form-text">The repository to deploy from</div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="appCount">Number of Apps</label>
                    <input type="number" id="appCount" class="form-control" value="5" min="1" max="20" required>
                    <div class="form-text">How many apps to create and deploy</div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="baseName">Base App Name</label>
                    <input type="text" id="baseName" class="form-control" required placeholder="my-bot">
                    <div class="form-text">Apps will be named: baseName-1, baseName-2, etc.</div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="regionBulk">Region</label>
                    <select id="regionBulk" class="form-control" required>
                        <option value="us">United States (us)</option>
                        <option value="eu">Europe (eu)</option>
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-rocket"></i> Start Bulk Deployment
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="appDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="appDetailsTitle">App Details</h3>
                <button class="modal-close" onclick="closeModal('appDetailsModal')">&times;</button>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="switchTab('deployLogs')">Deployment Logs</button>
                <button class="tab" onclick="switchTab('buildLogs')">Build Logs</button>
                <button class="tab" onclick="switchTab('appLogs')">App Logs</button>
                <button class="tab" onclick="switchTab('errors')">Errors</button>
                <button class="tab" onclick="switchTab('settings')">Settings</button>
            </div>

            <div id="deployLogsTab" class="tab-content active">
                <div class="card">
                    <h4 class="section-title">Deployment Logs</h4>
                    <div class="logs-container" id="deployLogsContent">
                        <span class="loading-spinner"></span> Loading deployment logs...
                    </div>
                </div>
            </div>

            <div id="buildLogsTab" class="tab-content">
                <div class="card">
                    <h4 class="section-title">Build Logs</h4>
                    <div class="logs-container" id="buildLogsContent">
                        <span class="loading-spinner"></span> Loading build logs...
                    </div>
                </div>
            </div>

            <div id="appLogsTab" class="tab-content">
                <div class="card">
                    <h4 class="section-title">Application Logs</h4>
                    <div class="logs-container" id="appLogsContent">
                        <span class="loading-spinner"></span> Loading application logs...
                    </div>
                </div>
            </div>

            <div id="errorsTab" class="tab-content">
                <div class="card">
                    <h4 class="section-title">Deployment Errors</h4>
                    <div id="appErrorsContent">
                        <span class="loading-spinner"></span> Loading errors...
                    </div>
                </div>
            </div>

            <div id="settingsTab" class="tab-content">
                <div class="card">
                    <h4 class="section-title">Deployment Settings</h4>
                    <form id="appDeploySettingsForm">
                        <div class="form-group">
                            <label class="form-label" for="autoRedeploy">Auto Redeploy</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoRedeploy" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <div class="form-text">Automatically redeploy on code changes</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="healthCheck">Health Checks</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="healthCheck" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <div class="form-text">Enable automatic health checks after deployment</div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Settings</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Global state
    let currentData = {
        deployments: [],
        repositories: [],
        logs: [],
        errors: [],
        liveLogsInterval: null,
        currentAppDetails: null
    };

    // View management
    function showView(viewName) {
        document.querySelectorAll('.view').forEach(view => {
            view.classList.remove('active');
        });
        
        document.querySelectorAll('.nav-menu li').forEach(item => {
            item.classList.remove('active');
        });
        
        document.getElementById(viewName + 'View').classList.add('active');
        event.target.closest('li').classList.add('active');
        
        switch(viewName) {
            case 'deployments':
                loadDeployments();
                break;
            case 'github':
                loadRepositories();
                break;
            case 'autoDeploy':
                loadAutoDeploySettings();
                break;
            case 'logs':
                loadRecentDeployments();
                break;
            case 'errors':
                loadErrors();
                break;
            case 'dashboard':
                loadDashboard();
                break;
        }
    }

    // API Calls
    async function apiCall(endpoint, options = {}) {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 15000);
        
        try {
            console.log(`üîÑ Calling API: ${endpoint}`);
            const response = await fetch(endpoint, {
                method: options.method || 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    ...options.headers
                },
                signal: controller.signal,
                ...options
            });
            
            clearTimeout(timeoutId);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            return data;
            
        } catch (error) {
            clearTimeout(timeoutId);
            console.error('‚ùå API call failed:', error);
            showNotification('Failed to fetch data: ' + error.message, 'error');
            return null;
        }
    }

    // Load deployments
    async function loadDeployments() {
        const deployments = await apiCall('/admin/heroku/apps');
        if (deployments && deployments.success) {
            currentData.deployments = deployments.apps || [];
            renderDeployments();
            renderDeploymentStats();
        }
    }

    // Render deployments
    function renderDeployments() {
        const deploymentsList = document.getElementById('deploymentsList');
        const deployments = currentData.deployments;

        if (deployments.length === 0) {
            deploymentsList.innerHTML = '<div class="empty-state">No deployments found</div>';
            return;
        }

        deploymentsList.innerHTML = deployments.map(app => `
            <div class="deployment-card">
                <div class="deployment-header">
                    <div class="deployment-name">${app.name}</div>
                    <div class="deployment-status status-success">Deployed</div>
                </div>
                <div class="deployment-details">
                    <div class="deployment-detail">
                        <span class="deployment-label">Region</span>
                        <span class="deployment-value">${app.region?.name || 'Unknown'}</span>
                    </div>
                    <div class="deployment-detail">
                        <span class="deployment-label">Stack</span>
                        <span class="deployment-value">${app.stack?.name || 'Unknown'}</span>
                    </div>
                    <div class="deployment-detail">
                        <span class="deployment-label">Created</span>
                        <span class="deployment-value">${new Date(app.created_at).toLocaleDateString()}</span>
                    </div>
                    <div class="deployment-detail">
                        <span class="deployment-label">URL</span>
                        <span class="deployment-value">
                            <a href="${app.web_url}" target="_blank">${app.web_url}</a>
                        </span>
                    </div>
                </div>
                <div class="deployment-actions">
                    <button class="btn btn-sm btn-info" onclick="viewAppDetails('${app.name}')">
                        <i class="fas fa-info-circle"></i> Details
                    </button>
                    <button class="btn btn-sm btn-warning" onclick="restartApp('${app.name}')">
                        <i class="fas fa-redo"></i> Restart
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="deleteApp('${app.name}')">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        `).join('');
    }

    // Render deployment stats
    function renderDeploymentStats() {
        const statsGrid = document.getElementById('deploymentStats');
        const deployments = currentData.deployments;

        const successful = deployments.length;
        const failed = 0; // You would track this in your backend
        const building = 0; // You would track this in your backend
        const total = deployments.length;

        statsGrid.innerHTML = `
            <div class="stat-item">
                <i class="fas fa-check-circle"></i>
                <div class="stat-number">${successful}</div>
                <div class="stat-label">Successful</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-times-circle"></i>
                <div class="stat-number">${failed}</div>
                <div class="stat-label">Failed</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-sync-alt"></i>
                <div class="stat-number">${building}</div>
                <div class="stat-label">Building</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-layer-group"></i>
                <div class="stat-number">${total}</div>
                <div class="stat-label">Total</div>
            </div>
        `;
    }

    // Load repositories
    async function loadRepositories() {
        // This would call your backend to get connected GitHub repositories
        // For now, we'll use mock data
        currentData.repositories = [
            { name: 'my-bot-app', url: 'https://github.com/user/my-bot-app', connected: true },
            { name: 'api-server', url: 'https://github.com/user/api-server', connected: true },
            { name: 'web-dashboard', url: 'https://github.com/user/web-dashboard', connected: false }
        ];
        renderRepositories();
    }

    // Render repositories
    function renderRepositories() {
        const reposList = document.getElementById('repositoriesList');
        const repos = currentData.repositories;

        if (repos.length === 0) {
            reposList.innerHTML = '<div class="empty-state">No repositories connected</div>';
            return;
        }

        reposList.innerHTML = repos.map(repo => `
            <div class="deployment-card">
                <div class="deployment-header">
                    <div class="deployment-name">${repo.name}</div>
                    <div class="deployment-status ${repo.connected ? 'status-success' : 'status-pending'}">
                        ${repo.connected ? 'Connected' : 'Not Connected'}
                    </div>
                </div>
                <div class="deployment-details">
                    <div class="deployment-detail">
                        <span class="deployment-label">URL</span>
                        <span class="deployment-value">
                            <a href="${repo.url}" target="_blank">${repo.url}</a>
                        </span>
                    </div>
                </div>
                <div class="deployment-actions">
                    ${repo.connected ? `
                        <button class="btn btn-sm btn-success" onclick="deployFromRepo('${repo.url}')">
                            <i class="fas fa-rocket"></i> Deploy
                        </button>
                        <button class="btn btn-sm btn-warning" onclick="disconnectRepo('${repo.name}')">
                            <i class="fas fa-unlink"></i> Disconnect
                        </button>
                    ` : `
                        <button class="btn btn-sm btn-primary" onclick="connectRepo('${repo.name}')">
                            <i class="fas fa-link"></i> Connect
                        </button>
                    `}
                </div>
            </div>
        `).join('');
    }

    // Load auto deploy settings
    function loadAutoDeploySettings() {
        // Load settings from localStorage or your backend
        document.getElementById('enableAutoDeploy').checked = localStorage.getItem('enableAutoDeploy') !== 'false';
        document.getElementById('deployOnTag').checked = localStorage.getItem('deployOnTag') === 'true';
        document.getElementById('rollbackOnFailure').checked = localStorage.getItem('rollbackOnFailure') !== 'false';
    }

    // Save auto deploy settings
    function saveAutoDeploySettings() {
        localStorage.setItem('enableAutoDeploy', document.getElementById('enableAutoDeploy').checked);
        localStorage.setItem('deployOnTag', document.getElementById('deployOnTag').checked);
        localStorage.setItem('rollbackOnFailure', document.getElementById('rollbackOnFailure').checked);
        showNotification('Auto deploy settings saved successfully', 'success');
    }

    // Start live logs
    function startLiveLogs() {
        stopLiveLogs(); // Clear any existing interval
        
        const liveLogs = document.getElementById('liveLogs');
        liveLogs.innerHTML = '<div class="log-entry"><span class="log-timestamp">' + new Date().toLocaleTimeString() + '</span><span class="log-message">Starting live logs...</span></div>';
        
        currentData.liveLogsInterval = setInterval(async () => {
            // Simulate receiving new logs
            const newLogs = await getLiveLogs();
            newLogs.forEach(log => {
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry';
                logEntry.innerHTML = `<span class="log-timestamp">${log.timestamp}</span><span class="log-message ${log.type}">${log.message}</span>`;
                liveLogs.appendChild(logEntry);
            });
            
            // Auto-scroll to bottom
            liveLogs.scrollTop = liveLogs.scrollHeight;
        }, 2000);
        
        showNotification('Live logs started', 'success');
    }

    // Stop live logs
    function stopLiveLogs() {
        if (currentData.liveLogsInterval) {
            clearInterval(currentData.liveLogsInterval);
            currentData.liveLogsInterval = null;
            showNotification('Live logs stopped', 'warning');
        }
    }

    // Simulate live logs
    async function getLiveLogs() {
        const types = ['info', 'success', 'warning', 'error'];
        const messages = [
            'Building application...',
            'Dependencies installed successfully',
            'Compiling TypeScript...',
            'Build completed successfully',
            'Deploying to production...',
            'Health check passed',
            'Deployment completed successfully'
        ];
        
        const logType = types[Math.floor(Math.random() * types.length)];
        const logMessage = messages[Math.floor(Math.random() * messages.length)];
        
        return [{
            timestamp: new Date().toLocaleTimeString(),
            type: logType,
            message: logMessage
        }];
    }

    // Clear logs
    function clearLogs() {
        document.getElementById('liveLogs').innerHTML = '';
        showNotification('Logs cleared', 'info');
    }

    // Load errors
    async function loadErrors() {
        // This would call your backend to get deployment errors
        // For now, we'll use mock data
        currentData.errors = [
            { id: 1, app: 'my-bot-1', message: 'Build failed: Dependency conflict', timestamp: new Date().toISOString(), type: 'build' },
            { id: 2, app: 'api-server', message: 'Deployment timeout', timestamp: new Date(Date.now() - 300000).toISOString(), type: 'deploy' },
            { id: 3, app: 'web-dashboard', message: 'Health check failed', timestamp: new Date(Date.now() - 600000).toISOString(), type: 'health' }
        ];
        renderErrors();
    }

    // Render errors
    function renderErrors() {
        const errorCount = document.getElementById('errorCount');
        const errorList = document.getElementById('errorList');
        
        errorCount.textContent = `${currentData.errors.length} Errors`;
        
        if (currentData.errors.length === 0) {
            errorList.innerHTML = '<div class="empty-state">No errors found</div>';
            return;
        }

        errorList.innerHTML = currentData.errors.map(error => `
            <div class="error-item">
                <strong>${error.app}</strong>: ${error.message}
                <div style="color: var(--medium-gray); font-size: 0.7rem;">
                    ${new Date(error.timestamp).toLocaleString()} ‚Ä¢ ${error.type}
                </div>
            </div>
        `).join('');
    }

    // Clear all errors
    function clearAllErrors() {
        if (confirm('Are you sure you want to clear all errors?')) {
            currentData.errors = [];
            renderErrors();
            showNotification('All errors cleared', 'success');
        }
    }

    // Load recent deployments
    async function loadRecentDeployments() {
        // This would call your backend to get recent deployment history
        // For now, we'll use the current deployments
        renderRecentDeployments();
    }

    // Render recent deployments
    function renderRecentDeployments() {
        const recentDeployments = document.getElementById('recentDeployments');
        const deployments = currentData.deployments.slice(0, 5); // Show only 5 most recent

        if (deployments.length === 0) {
            recentDeployments.innerHTML = '<div class="empty-state">No recent deployments</div>';
            return;
        }

        recentDeployments.innerHTML = deployments.map(app => `
            <div class="deployment-card">
                <div class="deployment-header">
                    <div class="deployment-name">${app.name}</div>
                    <div class="deployment-status status-success">Success</div>
                </div>
                <div class="deployment-details">
                    <div class="deployment-detail">
                        <span class="deployment-label">Deployed</span>
                        <span class="deployment-value">${new Date(app.created_at).toLocaleString()}</span>
                    </div>
                    <div class="deployment-detail">
                        <span class="deployment-label">URL</span>
                        <span class="deployment-value">
                            <a href="${app.web_url}" target="_blank">View App</a>
                        </span>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Load dashboard
    async function loadDashboard() {
        const dashboardStats = document.getElementById('dashboardStats');
        const deployments = currentData.deployments;

        dashboardStats.innerHTML = `
            <div class="stat-item">
                <i class="fas fa-rocket"></i>
                <div class="stat-number">${deployments.length}</div>
                <div class="stat-label">Active Apps</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-code-branch"></i>
                <div class="stat-number">${currentData.repositories.filter(r => r.connected).length}</div>
                <div class="stat-label">Connected Repos</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-exclamation-triangle"></i>
                <div class="stat-number">${currentData.errors.length}</div>
                <div class="stat-label">Active Errors</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-check-circle"></i>
                <div class="stat-number">98%</div>
                <div class="stat-label">Success Rate</div>
            </div>
        `;
    }

    // Modal functions
    function showModal(modalId) {
        document.getElementById(modalId).classList.add('active');
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.remove('active');
    }

    function showCreateAppModal() {
        showModal('createAppModal');
    }

    function showBulkDeployModal() {
        showModal('bulkDeployModal');
    }

    // Tab switching
    function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(tab => {
            tab.classList.remove('active');
        });
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
        });
        
        event.target.classList.add('active');
        document.getElementById(tabName + 'Tab').classList.add('active');
    }

    // View app details
    async function viewAppDetails(appName) {
        currentData.currentAppDetails = appName;
        document.getElementById('appDetailsTitle').textContent = `App: ${appName}`;
        
        // Load app logs
        await loadAppLogs(appName);
        showModal('appDetailsModal');
    }

    // Load app logs
    async function loadAppLogs(appName) {
        const deployLogs = document.getElementById('deployLogsContent');
        const buildLogs = document.getElementById('buildLogsContent');
        const appLogs = document.getElementById('appLogsContent');
        
        // Simulate loading different types of logs
        deployLogs.innerHTML = formatLogs('Deployment started...\nInstalling dependencies...\nBuilding application...\nDeployment completed successfully!', 'deploy');
        buildLogs.innerHTML = formatLogs('npm install...\nCompiling TypeScript...\nRunning tests...\nBuild completed successfully!', 'build');
        appLogs.innerHTML = formatLogs('Server started on port 3000\nDatabase connected\nHealth check passed\nReady for requests!', 'info');
    }

    // Format logs with color coding
    function formatLogs(logs, type = 'info') {
        const lines = logs.split('\n');
        return lines.map(line => {
            let className = type;
            if (line.includes('error') || line.includes('fail') || line.includes('Error')) {
                className = 'error';
            } else if (line.includes('warn') || line.includes('Warn')) {
                className = 'warning';
            } else if (line.includes('build') || line.includes('Build')) {
                className = 'build';
            } else if (line.includes('deploy') || line.includes('Deploy')) {
                className = 'deploy';
            }
            
            return `<div class="log-line ${className}">${line}</div>`;
        }).join('');
    }

    // Connect GitHub
    function connectGitHub() {
        showNotification('Redirecting to GitHub authentication...', 'info');
        // This would redirect to GitHub OAuth
        setTimeout(() => {
            showNotification('GitHub connected successfully!', 'success');
            loadRepositories();
        }, 2000);
    }

    // Deploy from repository
    function deployFromRepo(repoUrl) {
        showNotification(`Starting deployment from ${repoUrl}...`, 'info');
        // This would trigger deployment from the repository
        setTimeout(() => {
            showNotification('Deployment started successfully!', 'success');
        }, 1000);
    }

    // Quick deploy form
    document.getElementById('quickDeployForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const repo = document.getElementById('quickRepo').value;
        const branch = document.getElementById('quickBranch').value;
        const appName = document.getElementById('quickAppName').value;
        
        showNotification(`Starting quick deployment: ${appName} from ${repo} (${branch})`, 'info');
        
        // Simulate deployment
        setTimeout(() => {
            showNotification(`App ${appName} deployed successfully!`, 'success');
            document.getElementById('quickDeployForm').reset();
            loadDeployments();
        }, 3000);
    });

    // Create app form
    document.getElementById('createAppForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const appName = document.getElementById('appName').value;
        const region = document.getElementById('appRegion').value;
        const stack = document.getElementById('appStack').value;
        
        const result = await apiCall('/admin/heroku/apps', {
            method: 'POST',
            body: JSON.stringify({
                name: appName,
                region: region,
                stack: stack
            })
        });
        
        if (result && result.success) {
            showNotification(`App ${appName} created successfully`, 'success');
            closeModal('createAppModal');
            document.getElementById('createAppForm').reset();
            loadDeployments();
        } else {
            showNotification(`Failed to create app: ${result?.error || 'Unknown error'}`, 'error');
        }
    });

    // Bulk deploy form
    document.getElementById('bulkDeployForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const githubRepo = document.getElementById('githubRepoBulk').value;
        const appCount = document.getElementById('appCount').value;
        const baseName = document.getElementById('baseName').value;
        const region = document.getElementById('regionBulk').value;
        
        const result = await apiCall('/admin/heroku/bulk-deploy', {
            method: 'POST',
            body: JSON.stringify({
                githubRepo: githubRepo,
                appCount: parseInt(appCount),
                baseName: baseName,
                region: region
            })
        });
        
        if (result && result.success) {
            showNotification(`Bulk deployment started for ${appCount} apps`, 'success');
            closeModal('bulkDeployModal');
            document.getElementById('bulkDeployForm').reset();
        } else {
            showNotification(`Failed to start bulk deployment: ${result?.error || 'Unknown error'}`, 'error');
        }
    });

    // Utility functions
    function showNotification(message, type = 'info') {
        // Simple notification implementation
        alert(`${type.toUpperCase()}: ${message}`);
    }

    function refreshDashboard() {
        loadDashboard();
        showNotification('Dashboard refreshed', 'success');
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        loadDeployments();
        loadRepositories();
        loadAutoDeploySettings();
        loadErrors();
    });

    // Keep the deployment running even when tab is not visible
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden && currentData.liveLogsInterval) {
            startLiveLogs();
        }
    });
    </script>
</body>
</html>
